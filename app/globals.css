@import "tailwindcss";

/* include utility classes in streamdown */
@source '../node_modules/streamdown/dist/index.js';

/* custom variant for setting dark mode programmatically */
@custom-variant dark (&:is(.dark, .dark *));

/* include plugins */
@plugin "tailwindcss-animate";
@plugin "@tailwindcss/typography";

/* define design tokens (light mode) */
:root {
  --background: hsl(0 0% 100%);
  --foreground: hsl(240 10% 3.9%);
  --card: hsl(0 0% 100%);
  --card-foreground: hsl(240 10% 3.9%);
  --popover: hsl(0 0% 100%);
  --popover-foreground: hsl(240 10% 3.9%);
  --primary: hsl(240 5.9% 10%);
  --primary-foreground: hsl(0 0% 98%);
  --secondary: hsl(240 4.8% 95.9%);
  --secondary-foreground: hsl(240 5.9% 10%);
  --muted: hsl(240 4.8% 95.9%);
  --muted-foreground: hsl(240 3.8% 46.1%);
  --accent: hsl(240 4.8% 95.9%);
  --accent-foreground: hsl(240 5.9% 10%);
  --destructive: hsl(0 84.2% 60.2%);
  --destructive-foreground: hsl(0 0% 98%);
  --border: hsl(240 5.9% 90%);
  --input: hsl(240 5.9% 90%);
  --ring: hsl(240 10% 3.9%);
  --chart-1: hsl(12 76% 61%);
  --chart-2: hsl(173 58% 39%);
  --chart-3: hsl(197 37% 24%);
  --chart-4: hsl(43 74% 66%);
  --chart-5: hsl(27 87% 67%);
  --sidebar-background: hsl(0 0% 98%);
  --sidebar-foreground: hsl(240 5.3% 26.1%);
  --sidebar-primary: hsl(240 5.9% 10%);
  --sidebar-primary-foreground: hsl(0 0% 98%);
  --sidebar-accent: hsl(240 4.8% 95.9%);
  --sidebar-accent-foreground: hsl(240 5.9% 10%);
  --sidebar-border: hsl(220 13% 91%);
  --sidebar-ring: hsl(217.2 91.2% 59.8%);
  /* border radius unit */
  --radius: 0.5rem;
  --sidebar: hsl(0 0% 98%);
}

/* define design tokens (dark mode) */
.dark {
  --background: hsl(240 10% 3.9%);
  --foreground: hsl(0 0% 98%);
  --card: hsl(240 10% 3.9%);
  --card-foreground: hsl(0 0% 98%);
  --popover: hsl(240 10% 3.9%);
  --popover-foreground: hsl(0 0% 98%);
  --primary: hsl(0 0% 98%);
  --primary-foreground: hsl(240 5.9% 10%);
  --secondary: hsl(240 3.7% 15.9%);
  --secondary-foreground: hsl(0 0% 98%);
  --muted: hsl(240 3.7% 15.9%);
  --muted-foreground: hsl(240 5% 64.9%);
  --accent: hsl(240 3.7% 15.9%);
  --accent-foreground: hsl(0 0% 98%);
  --destructive: hsl(0 62.8% 30.6%);
  --destructive-foreground: hsl(0 0% 98%);
  --border: hsl(240 3.7% 15.9%);
  --input: hsl(240 3.7% 15.9%);
  --ring: hsl(240 4.9% 83.9%);
  --chart-1: hsl(220 70% 50%);
  --chart-2: hsl(160 60% 45%);
  --chart-3: hsl(30 80% 55%);
  --chart-4: hsl(280 65% 60%);
  --chart-5: hsl(340 75% 55%);
  --sidebar-background: hsl(240 5.9% 10%);
  --sidebar-foreground: hsl(240 4.8% 95.9%);
  --sidebar-primary: hsl(224.3 76.3% 48%);
  --sidebar-primary-foreground: hsl(0 0% 100%);
  --sidebar-accent: hsl(240 3.7% 15.9%);
  --sidebar-accent-foreground: hsl(240 4.8% 95.9%);
  --sidebar-border: hsl(240 3.7% 15.9%);
  --sidebar-ring: hsl(217.2 91.2% 59.8%);
  --sidebar: hsl(240 5.9% 10%);
}

/* define theme */
@theme {
  --font-sans: var(--font-geist);
  --font-mono: var(--font-geist-mono);

  --breakpoint-toast-mobile: 600px;

  --radius-lg: var(--radius);
  --radius-md: calc(var(--radius) - 2px);
  --radius-sm: calc(var(--radius) - 4px);

  --color-background: var(--background);
  --color-foreground: var(--foreground);

  --color-card: var(--card);
  --color-card-foreground: var(--card-foreground);

  --color-popover: var(--popover);
  --color-popover-foreground: var(--popover-foreground);

  --color-primary: var(--primary);
  --color-primary-foreground: var(--primary-foreground);

  --color-secondary: var(--secondary);
  --color-secondary-foreground: var(--secondary-foreground);

  --color-muted: var(--muted);
  --color-muted-foreground: var(--muted-foreground);

  --color-accent: var(--accent);
  --color-accent-foreground: var(--accent-foreground);

  --color-destructive: var(--destructive);
  --color-destructive-foreground: var(--destructive-foreground);

  --color-border: var(--border);
  --color-input: var(--input);
  --color-ring: var(--ring);

  --color-chart-1: var(--chart-1);
  --color-chart-2: var(--chart-2);
  --color-chart-3: var(--chart-3);
  --color-chart-4: var(--chart-4);
  --color-chart-5: var(--chart-5);

  --color-sidebar: var(--sidebar-background);
  --color-sidebar-foreground: var(--sidebar-foreground);
  --color-sidebar-primary: var(--sidebar-primary);
  --color-sidebar-primary-foreground: var(--sidebar-primary-foreground);
  --color-sidebar-accent: var(--sidebar-accent);
  --color-sidebar-accent-foreground: var(--sidebar-accent-foreground);
  --color-sidebar-border: var(--sidebar-border);
  --color-sidebar-ring: var(--sidebar-ring);
}

/*
  The default border color has changed to `currentcolor` in Tailwind CSS v4,
  so we've added these compatibility styles to make sure everything still
  looks the same as it did with Tailwind CSS v3.

  If we ever want to remove these styles, we need to add an explicit border
  color utility to any element that depends on these defaults.
*/
@layer base {
  *,
  ::after,
  ::before,
  ::backdrop,
  ::file-selector-button {
    border-color: var(--color-gray-200, currentcolor);
  }
}

@utility text-balance {
  text-wrap: balance;
}

@utility -webkit-overflow-scrolling-touch {
  -webkit-overflow-scrolling: touch;
}

@utility touch-pan-y {
  touch-action: pan-y;
}

@utility overscroll-behavior-contain {
  overscroll-behavior: contain;
}

@layer utilities {
  :root {
    --foreground-rgb: 0, 0, 0;
    --background-start-rgb: 214, 219, 220;
    --background-end-rgb: 255, 255, 255;
  }

  @media (prefers-color-scheme: dark) {
    :root {
      --foreground-rgb: 255, 255, 255;
      --background-start-rgb: 0, 0, 0;
      --background-end-rgb: 0, 0, 0;
    }
  }
}

@layer base {
  * {
    @apply border-border;
  }

  body {
    @apply bg-background text-foreground;
    overflow-x: hidden;
    position: relative;
  }

  html {
    overflow-x: hidden;
  }
}

.skeleton {
  * {
    pointer-events: none !important;
  }

  *[class^="text-"] {
    color: transparent;
    @apply rounded-md bg-foreground/20 select-none animate-pulse;
  }

  .skeleton-bg {
    @apply bg-foreground/10;
  }

  .skeleton-div {
    @apply bg-foreground/20 animate-pulse;
  }
}

.ProseMirror {
  outline: none;
}

.cm-editor,
.cm-gutters {
  @apply bg-background! dark:bg-zinc-800! outline-hidden! selection:bg-zinc-900!;
}

.ͼo.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground,
.ͼo.cm-selectionBackground,
.ͼo.cm-content::selection {
  @apply bg-zinc-200! dark:bg-zinc-900!;
}

.cm-activeLine,
.cm-activeLineGutter {
  @apply bg-transparent!;
}

.cm-activeLine {
  @apply rounded-r-sm!;
}

.cm-lineNumbers {
  @apply min-w-7;
}

.cm-foldGutter {
  @apply min-w-3;
}

.cm-lineNumbers .cm-activeLineGutter {
  @apply rounded-l-sm!;
}

.suggestion-highlight {
  @apply bg-blue-200 hover:bg-blue-300 dark:hover:bg-blue-400/50 dark:text-blue-50 dark:bg-blue-500/40;
}

/* minimal scrollbar styling */
::-webkit-scrollbar {
  width: 6px;
  height: 6px;
}

::-webkit-scrollbar-track {
  background: transparent;
}

::-webkit-scrollbar-thumb {
  background: var(--border);
  border-radius: 3px;
  transition: background 0.2s ease;
}

::-webkit-scrollbar-thumb:hover {
  background: --alpha(var(--muted-foreground) / 0.5);
}

::-webkit-scrollbar-corner {
  background: transparent;
}

/* firefox scrollbar styling */
* {
  scrollbar-width: thin;
  scrollbar-color: var(--border) transparent;
}

@theme inline {
  --color-sidebar: var(--sidebar);
  --color-sidebar-foreground: var(--sidebar-foreground);
  --color-sidebar-primary: var(--sidebar-primary);
  --color-sidebar-primary-foreground: var(--sidebar-primary-foreground);
  --color-sidebar-accent: var(--sidebar-accent);
  --color-sidebar-accent-foreground: var(--sidebar-accent-foreground);
  --color-sidebar-border: var(--sidebar-border);
  --color-sidebar-ring: var(--sidebar-ring);
}

@layer base {
  * {
    @apply border-border outline-ring/50;
  }
  body {
    @apply bg-background text-foreground;
  }
}

/* Enhanced Modern Styling */
@layer components {
  /* Enhanced Chat Interface */
  .chat-container {
    @apply relative min-h-screen bg-gradient-to-br from-background via-background to-muted/20;
  }

  .chat-container::before {
    content: '';
    @apply absolute inset-0 bg-gradient-to-br from-primary/5 via-transparent to-accent/5 pointer-events-none;
  }

  /* Enhanced Message Styling */
  .message-container {
    @apply relative backdrop-blur-sm bg-card/80 border border-border/50 rounded-xl shadow-sm hover:shadow-md transition-all duration-300;
  }

  .message-container::before {
    content: '';
    @apply absolute inset-0 bg-gradient-to-r from-transparent via-primary/5 to-transparent opacity-0 hover:opacity-100 transition-opacity duration-300 rounded-xl pointer-events-none;
  }

  /* Enhanced Input Styling */
  .input-enhanced {
    @apply relative bg-background/95 backdrop-blur-md border border-border/60 rounded-xl shadow-lg hover:shadow-xl focus-within:shadow-xl transition-all duration-300;
  }

  .input-enhanced::before {
    content: '';
    @apply absolute inset-0 bg-gradient-to-r from-primary/10 via-transparent to-accent/10 opacity-0 focus-within:opacity-100 transition-opacity duration-300 rounded-xl pointer-events-none;
  }

  /* Enhanced Sidebar */
  .sidebar-enhanced {
    @apply relative bg-sidebar/95 backdrop-blur-md border-r border-sidebar-border/60;
  }

  .sidebar-enhanced::before {
    content: '';
    @apply absolute inset-0 bg-gradient-to-b from-sidebar-primary/5 via-transparent to-sidebar-accent/5 pointer-events-none;
  }

  /* Enhanced Button Styles */
  .btn-enhanced {
    @apply relative overflow-hidden bg-gradient-to-r from-primary to-primary/90 text-primary-foreground shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-300;
  }

  .btn-enhanced::before {
    content: '';
    @apply absolute inset-0 bg-gradient-to-r from-white/20 via-transparent to-white/20 translate-x-[-100%] hover:translate-x-[100%] transition-transform duration-700 pointer-events-none;
  }

  /* Enhanced Card Styles */
  .card-enhanced {
    @apply relative bg-card/90 backdrop-blur-sm border border-border/50 rounded-xl shadow-sm hover:shadow-lg transition-all duration-300;
  }

  .card-enhanced::before {
    content: '';
    @apply absolute inset-0 bg-gradient-to-br from-primary/5 via-transparent to-accent/5 opacity-0 hover:opacity-100 transition-opacity duration-300 rounded-xl pointer-events-none;
  }

  /* Typography Enhancements */
  .text-enhanced {
    @apply bg-gradient-to-r from-foreground to-foreground/80 bg-clip-text text-transparent;
  }

  .heading-enhanced {
    @apply bg-gradient-to-r from-primary via-foreground to-primary bg-clip-text text-transparent font-semibold tracking-tight;
  }

  /* Loading and Animation States */
  .loading-shimmer {
    @apply relative overflow-hidden bg-muted/50 rounded-md;
  }

  .loading-shimmer::before {
    content: '';
    @apply absolute inset-0 bg-gradient-to-r from-transparent via-foreground/10 to-transparent translate-x-[-100%] animate-pulse;
    animation: shimmer 2s infinite;
  }

  /* Focus and Interaction States */
  .focus-enhanced:focus-visible {
    @apply outline-none ring-2 ring-ring/50 ring-offset-2 ring-offset-background shadow-lg;
  }

  .hover-lift {
    @apply transform hover:scale-[1.02] hover:-translate-y-1 transition-all duration-300 hover:shadow-lg;
  }

  /* Glassmorphism Effects */
  .glass {
    @apply bg-background/80 backdrop-blur-md border border-border/50;
  }

  .glass-strong {
    @apply bg-background/90 backdrop-blur-lg border border-border/60 shadow-xl;
  }

  /* Gradient Backgrounds */
  .bg-gradient-primary {
    @apply bg-gradient-to-br from-primary/10 via-background to-accent/10;
  }

  .bg-gradient-secondary {
    @apply bg-gradient-to-br from-secondary/20 via-background to-muted/20;
  }

  /* Enhanced Scrollbars */
  .scrollbar-enhanced {
    scrollbar-width: thin;
    scrollbar-color: var(--border) transparent;
  }

  .scrollbar-enhanced::-webkit-scrollbar {
    width: 8px;
    height: 8px;
  }

  .scrollbar-enhanced::-webkit-scrollbar-track {
    background: transparent;
    border-radius: 4px;
  }

  .scrollbar-enhanced::-webkit-scrollbar-thumb {
    background: var(--border);
    border-radius: 4px;
    transition: background 0.3s ease;
  }

  .scrollbar-enhanced::-webkit-scrollbar-thumb:hover {
    background: var(--muted-foreground);
  }

  /* Modern Animation Keyframes */
  @keyframes shimmer {
    0% { transform: translateX(-100%); }
    100% { transform: translateX(100%); }
  }

  @keyframes fadeInUp {
    from {
      opacity: 0;
      transform: translateY(20px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  @keyframes fadeInScale {
    from {
      opacity: 0;
      transform: scale(0.95);
    }
    to {
      opacity: 1;
      transform: scale(1);
    }
  }

  @keyframes slideInRight {
    from {
      opacity: 0;
      transform: translateX(20px);
    }
    to {
      opacity: 1;
      transform: translateX(0);
    }
  }

  @keyframes pulse-glow {
    0%, 100% {
      box-shadow: 0 0 5px var(--primary), 0 0 10px var(--primary), 0 0 15px var(--primary);
    }
    50% {
      box-shadow: 0 0 10px var(--primary), 0 0 20px var(--primary), 0 0 30px var(--primary);
    }
  }

  /* Animation Classes */
  .animate-fade-in-up {
    animation: fadeInUp 0.6s ease-out;
  }

  .animate-fade-in-scale {
    animation: fadeInScale 0.4s ease-out;
  }

  .animate-slide-in-right {
    animation: slideInRight 0.5s ease-out;
  }

  .animate-pulse-glow {
    animation: pulse-glow 2s ease-in-out infinite;
  }

  /* Enhanced Responsive Design */
  .responsive-grid {
    @apply grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4 md:gap-6;
  }

  .responsive-padding {
    @apply px-4 py-6 md:px-6 md:py-8 lg:px-8 lg:py-10;
  }

  .responsive-text {
    @apply text-sm md:text-base lg:text-lg;
  }

  .responsive-heading {
    @apply text-xl md:text-2xl lg:text-3xl xl:text-4xl;
  }

  /* Enhanced Mobile Optimizations */
  @media (max-width: 768px) {
    .mobile-optimized {
      @apply text-base leading-relaxed;
    }

    .mobile-touch-target {
      @apply min-h-[44px] min-w-[44px];
    }

    .mobile-spacing {
      @apply px-4 py-3;
    }
  }

  /* Enhanced Dark Mode Transitions */
  .dark-mode-transition {
    @apply transition-colors duration-300 ease-in-out;
  }

  /* Enhanced Focus States for Accessibility */
  .focus-visible-enhanced:focus-visible {
    @apply outline-none ring-2 ring-primary ring-offset-2 ring-offset-background;
  }

  .focus-visible-enhanced:focus-visible::before {
    content: '';
    @apply absolute inset-0 bg-primary/10 rounded-md pointer-events-none;
  }

  /* Enhanced Status Indicators */
  .status-online {
    @apply relative;
  }

  .status-online::before {
    content: '';
    @apply absolute -top-1 -right-1 w-3 h-3 bg-green-500 rounded-full border-2 border-background;
  }

  .status-typing {
    @apply relative;
  }

  .status-typing::before {
    content: '';
    @apply absolute -top-1 -right-1 w-3 h-3 bg-blue-500 rounded-full border-2 border-background animate-pulse;
  }

  /* Enhanced Loading States */
  .loading-dots {
    @apply inline-flex space-x-1;
  }

  .loading-dots span {
    @apply w-2 h-2 bg-current rounded-full animate-pulse;
    animation-delay: calc(var(--delay, 0) * 0.2s);
  }

  /* Enhanced Chat-Specific Styling */
  .chat-message-user {
    @apply bg-gradient-to-r from-primary to-primary/90 text-primary-foreground rounded-2xl rounded-br-md shadow-md hover:shadow-lg transition-all duration-300;
  }

  .chat-message-assistant {
    @apply bg-gradient-to-r from-muted to-muted/80 text-foreground rounded-2xl rounded-bl-md shadow-md hover:shadow-lg transition-all duration-300 border border-border/50;
  }

  .chat-input-container {
    @apply relative bg-background/95 backdrop-blur-md border border-border/60 rounded-2xl shadow-lg hover:shadow-xl focus-within:shadow-xl focus-within:border-primary/50 transition-all duration-300;
  }

  .chat-sidebar {
    @apply bg-sidebar/95 backdrop-blur-md border-r border-sidebar-border/60 shadow-lg;
  }

  /* Enhanced Form Controls */
  .form-input-enhanced {
    @apply bg-background/90 border border-input/60 rounded-lg shadow-sm hover:shadow-md focus:shadow-lg focus:border-primary/50 transition-all duration-300 backdrop-blur-sm;
  }

  .form-textarea-enhanced {
    @apply bg-background/90 border border-input/60 rounded-lg shadow-sm hover:shadow-md focus:shadow-lg focus:border-primary/50 transition-all duration-300 backdrop-blur-sm resize-none;
  }

  .form-select-enhanced {
    @apply bg-background/90 border border-input/60 rounded-lg shadow-sm hover:shadow-md focus:shadow-lg focus:border-primary/50 transition-all duration-300 backdrop-blur-sm;
  }

  /* Enhanced Navigation */
  .nav-item {
    @apply relative px-3 py-2 rounded-lg text-foreground/80 hover:text-foreground hover:bg-accent/50 transition-all duration-300;
  }

  .nav-item.active {
    @apply text-primary bg-primary/10 shadow-sm;
  }

  .nav-item::before {
    content: '';
    @apply absolute inset-0 bg-gradient-to-r from-primary/10 via-transparent to-primary/10 opacity-0 hover:opacity-100 transition-opacity duration-300 rounded-lg pointer-events-none;
  }

  /* Enhanced Tooltips */
  .tooltip-enhanced {
    @apply bg-popover/95 backdrop-blur-md border border-border/60 text-popover-foreground rounded-lg shadow-lg px-3 py-2 text-sm;
  }

  /* Enhanced Modals and Overlays */
  .modal-overlay {
    @apply fixed inset-0 bg-background/80 backdrop-blur-sm z-50;
  }

  .modal-content {
    @apply bg-card/95 backdrop-blur-md border border-border/60 rounded-xl shadow-2xl max-w-lg w-full mx-4;
  }

  /* Enhanced Code Blocks */
  .code-block-enhanced {
    @apply bg-muted/50 border border-border/50 rounded-lg p-4 font-mono text-sm overflow-x-auto backdrop-blur-sm;
  }

  .code-block-enhanced::-webkit-scrollbar {
    height: 6px;
  }

  .code-block-enhanced::-webkit-scrollbar-track {
    background: transparent;
  }

  .code-block-enhanced::-webkit-scrollbar-thumb {
    background: var(--border);
    border-radius: 3px;
  }

  /* Enhanced Badges and Tags */
  .badge-enhanced {
    @apply inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-primary/10 text-primary border border-primary/20 shadow-sm;
  }

  .tag-enhanced {
    @apply inline-flex items-center px-3 py-1 rounded-lg text-sm font-medium bg-secondary/80 text-secondary-foreground border border-border/50 shadow-sm hover:shadow-md transition-all duration-300;
  }

  /* Enhanced Dividers */
  .divider-enhanced {
    @apply relative border-0 h-px bg-gradient-to-r from-transparent via-border to-transparent my-6;
  }

  .divider-enhanced::before {
    content: '';
    @apply absolute inset-0 bg-gradient-to-r from-transparent via-primary/20 to-transparent;
  }

  /* Enhanced Progress Indicators */
  .progress-enhanced {
    @apply relative bg-secondary/50 rounded-full overflow-hidden shadow-inner;
  }

  .progress-bar-enhanced {
    @apply bg-gradient-to-r from-primary to-primary/80 h-full rounded-full shadow-sm transition-all duration-500 ease-out;
  }
}
